!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var e,t,n={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};n.r(i),function(e){e.HORIZONTAL="HORIZONTAL",e.RECTANGLE="RECTANGLE",e.VERTICAL="VERTICAL",e.MOBILE="MOBILE",e.MOBILE_BIG="MOBILE_BIG",e.MOBILE_HORIZONTAL="MOBILE_HORIZONTAL",e.PORTRAIT="PORTRAIT",e.BILLBOARD="BILLBOARD"}(e||(e={}));var o=((t={})[e.HORIZONTAL]=[[970,90],[728,90],[468,60],[234,60]],t[e.RECTANGLE]=[[336,280],[300,250],[250,250],[200,200],[180,150],[125,125]],t[e.VERTICAL]=[[300,600],[160,600],[120,600],[120,240]],t[e.MOBILE]=[[320,50]],t[e.MOBILE_BIG]=[[320,100],[320,50]],t[e.MOBILE_HORIZONTAL]=[[970,90],[728,90],[468,60],[320,100],[320,50],[234,60]],t[e.PORTRAIT]=[[300,1050]],t[e.BILLBOARD]=[[970,250]],t["300x600"]=[[300,600],[160,600]],t["336x280"]=[[336,280],[300,250]],t["728x90"]=[[728,90],[468,60]],t["970x90"]=[[970,90],[728,90],[468,60]],t),r="https://ads.assemblyexchange.com",a="web_".concat("2.2.3"),s="ana_client_uid",d="ana_client_session_id",c="ana_vast",l="ana_staging",u="https://securepubads.g.doubleclick.net/tag/js/gpt.js",p="//c.amazon-adsystem.com/aax2/apstag.js",h=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https://tpc.googlesyndication.com$"),new RegExp("^https?://ana-sdk-creative.s3-website-us-west-2.amazonaws.com$"),new RegExp("^https://\\w+.safeframe.googlesyndication.com$"),new RegExp("^https?://localhost:9000$"),new RegExp("^https?://127.0.0.1:9000$")],g=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://ads.assemblyexchange.com$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https?://localhost:2279$"),new RegExp("^https?://127.0.0.1:2279$")],f=417,m="frequency_cap",y="cs_",v="cs_is_valid",b=2500,w=function(){var e=null;if(window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),!e)throw Error("Cannot create an XMLHttpRequest instance");return e},A=function(e){e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("ana-api-key","056363cfdcfcf7de5cea11820138b4d2daf3ca"),e.setRequestHeader("lib_version",a),e.setRequestHeader("publisher_version","web_0.0.1")},E=function(e,t){void 0===t&&(t={});var n,i,o=new URL(e);return t&&t!=={}?(void 0!==o.searchParams?Object.keys(t).forEach((function(e){return o.searchParams.append(e,String(t[e]))})):o.href+="?"+(n=t,i=[],Object.keys(n).forEach((function(e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]))})),i.join("&")),o):o};function S(e){return function(){this.readyState===XMLHttpRequest.DONE&&e&&e(this)}}function T(e){return function(){console.error("Error occurred while HTTP request to "+this.responseURL),e&&e(this)}}var I=function(e,t,n,i,o){void 0===t&&(t={}),void 0===n&&(n=null);var r=w();r.onreadystatechange=S(i),r.onerror=T(o);var a=E(e,t);r.open("POST",a.toString()),A(r),r.send(n?JSON.stringify(n):null)},D=function(e,t,n,i){void 0===t&&(t={});var o=w();o.onreadystatechange=S(n),o.onerror=T(i);var r=E(e,t);o.open("GET",r.toString()),A(o),o.send()},O=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))};function P(){return window.ANAWebSDKInstance}function R(){var e=P();if(e)return e.propertyId;var t=window.ANAWebPropertyId;return t||window.location.hostname}function _(e){try{var t=e(),n="__random_key__",i="__random_val__";return t.setItem(n,i),t.getItem(n)!==i?!1:(t.removeItem(n),!0)}catch(e){return!1}}function C(){return!!window.ana_debug||-1!==window.location.href.indexOf("ana_debug=1")}function M(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];C()&&console.log.apply(console,O(["%cðŸš¨ANA: ","background: #222; color: #33c65a"],e,!1))}function B(e){return-1!==document.cookie.indexOf(e+"=")}function L(e){return new URLSearchParams(window.location.search).get(e)}function k(e){var t=!1;return Array.from(document.getElementsByTagName("script")).forEach((function(n){n.getAttribute("src")===e&&(t=!0)})),t}function N(e,t,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw Error("No event listener found!");t.attachEvent("on".concat(e),n)}}var U=0,V=L("aversion");if(V&&!k("https://js.media-lab.ai/wana."+V+".js"))throw function e(t){if(!document.body)return console.error("ana-web is triying to load another version before there is a body to append to. Retry [".concat(t,"][").concat(U,"]")),(U+=1)<10?void setTimeout((function(){e(t)}),50):void console.error("Ana Web exhausted retries while waiting for document.body . Retry [".concat(t,"][").concat(U,"]"));var n="https://js.media-lab.ai/wana."+t+".js";k(n)||function(e,t){if(!k(e)){var n=document.createElement("script");n.async=t,n.src=e,document.body.appendChild(n)}}(n,!0)}(V),Error("Ana Version parameter found, stoping current script to load requested version [".concat(V,"]"));var x,j,q=function(){function e(){}return e.prototype.setItem=function(e,t){this[e]=t},e.prototype.getItem=function(e){var t=this[e];return t||(t=null),t},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){var e=this;Object.keys(this).forEach((function(t){delete e[t]}))},e.prototype.key=function(e){throw Error("not implemented (index = ".concat(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!1,configurable:!0}),e}();window.anaStorage=_((function(){return window.localStorage}))?window.localStorage:new q,window.anaSessionStorage=_((function(){return window.sessionStorage}))?window.sessionStorage:new q,function(e){e[e.GOOGLE=0]="GOOGLE",e[e.ANA=1]="ANA"}(x||(x={})),function(e){e[e.VIDEO_JS=0]="VIDEO_JS",e[e.HTML5=1]="HTML5"}(j||(j={}));var G=function(){function e(e){var t=this;Object.keys(e).forEach((function(n){var i=function(e,t){void 0===t&&(t=!1);var n=e.replace(/([-_]id$)|([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}));return"id"===n&&(n="ID"),n&&t&&(n=n[0].toUpperCase()+n.slice(1)),n}(n,!0);t[i]=e[n]}))}return e.prototype.toCustomJSON=function(){var e=this,t={};return Object.keys(this).forEach((function(n){var i=n.replace(/\.?([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"");t[i]=e[n]})),t},e.prototype.renderPixels=function(e){var t=this.BidID;e.forEach((function(e){var n=document.createElement("img");n.setAttribute("data-bid-id",t),n.setAttribute("src",e),n.setAttribute("width","1"),n.setAttribute("height","1"),document.body.appendChild(n)}))},e.prototype.renderImpressionPixels=function(){this.ImpressionPixels&&this.renderPixels(this.ImpressionPixels)},e.prototype.renderViewPixels=function(){this.ViewPixels&&this.renderPixels(this.ViewPixels)},e.prototype.renderClickPixels=function(){this.ClickPixels&&this.renderPixels(this.ClickPixels)},e.prototype.removeImpressionPixels=function(){for(var e=[],t=document.getElementsByTagName("img"),n=0;n<t.length;n++){var i=t[n];i.getAttribute("data-bid-id")===String(this.BidID)&&e.push(i)}e.forEach((function(e){return document.body.removeChild(e)}))},e.prototype.isExpired=function(){if(void 0===this.Expires)return!1;var e=this.Expires-this.Received,t=new Date(this.Expires);this.ClientReceived&&(t=new Date(this.ClientReceived+e));var n=new Date;return t.getTime()<n.getTime()},e}(),F=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&+e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},H=function(){return"y"===new URLSearchParams(window.location.search).get("tracing")},W=function(){var e=anaStorage.getItem(s);return e||(e=F(),anaStorage.setItem(s,e)),H()?"tr"+e:e},z=function(e,t){anaStorage.setItem(y+e,t)},J=function(e,t,n){if(!e)throw Error("propertyId is required");var i;i=e,window.ANAWebPropertyId=i,function(e){anaStorage.setItem(s,e)}(t),M("sending a syncing cookie request to doh"),ce.UserSync.getUrls(Object.keys(n),(function(e){if(200===e.status){if(""!==e.responseType&&"text"!==e.responseType)throw Error('incorrect response type "'.concat(e.responseType,'" from ').concat(e.responseURL));if(!B(v)){var t=new Date,n=t.getTime()+864e5;t.setTime(n);var i="".concat(v,"=1;expires=").concat(t.toUTCString(),";path=/");M("setting cookie:",i),document.cookie=i}var o=JSON.parse(e.responseText),r=o.sync_urls,a=o.cookie_ids,s=a?Object.keys(a):null;M("got response from /doh/sync:",r,a),Object.keys(r).forEach((function(e){s&&-1!==s.indexOf(e)||oe(e,r[e])})),a&&Object.keys(a).forEach((function(e){var t=a[e];t&&z(e,t)}))}}))};function K(e){this.callCounter++,M("appending iframe to body",e),document.body?document.body.appendChild(e):this.callCounter<200&&setTimeout(K.bind(this,e),50)}var $,Q,Z,X,Y,ee,te,ne,ie,oe=function(e,t){var n=R(),i=document.createElement("iframe");i.setAttribute("src",t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("TOPMARGIN","0"),i.setAttribute("LEFTMARGIN","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("data-property-id",n),M("creating cookie syncing iframe for "+e,t),setTimeout(K.bind({callCounter:0},i),0)},re=function(){var e={};return Object.keys(anaStorage).forEach((function(t){0===t.indexOf(y)&&B(v)&&(e[t.slice(y.length)]=anaStorage.getItem(t))})),e};!function(e){e[e.PageLoadSoundOn=1]="PageLoadSoundOn",e[e.PageLoadSoundOff=2]="PageLoadSoundOff",e[e.ClickSoundOn=3]="ClickSoundOn",e[e.MouseOverSoundOn=4]="MouseOverSoundOn",e[e.EnterViewpointSoundOn=5]="EnterViewpointSoundOn",e[e.EnterViewpointSoundOff=6]="EnterViewpointSoundOff"}($||($={})),function(e){e[e.GenericPostRoll=-2]="GenericPostRoll",e[e.GenericMidRoll=-1]="GenericMidRoll",e[e.PreRoll=0]="PreRoll",e[e.MidRoll3Sec=3]="MidRoll3Sec",e[e.MidRoll5Sec=5]="MidRoll5Sec",e[e.MidRoll10Sec=10]="MidRoll10Sec",e[e.MidRoll15Sec=15]="MidRoll15Sec",e[e.MidRoll30Sec=30]="MidRoll30Sec",e[e.MidRoll60Sec=60]="MidRoll60Sec"}(Q||(Q={})),function(e){e[e.InStream=1]="InStream",e[e.InBanner=2]="InBanner",e[e.InArticle=3]="InArticle",e[e.InFeed=4]="InFeed",e[e.Interstitial=5]="Interstitial"}(Z||(Z={})),function(e){e[e.InStream=1]="InStream",e[e.Overlay=2]="Overlay"}(X||(X={})),function(e){e[e.OnVideoCompletion=1]="OnVideoCompletion",e[e.OnLeavingViewport=2]="OnLeavingViewport",e[e.OnLeavingViewportContinues=3]="OnLeavingViewportContinues"}(Y||(Y={})),function(e){e[e.Unknown=0]="Unknown",e[e.AboveTheFold=1]="AboveTheFold",e[e.Deprecated=2]="Deprecated",e[e.BelowTheFold=3]="BelowTheFold",e[e.Header=4]="Header",e[e.Footer=5]="Footer",e[e.Sidebar=6]="Sidebar",e[e.FullScreen=7]="FullScreen"}(ee||(ee={})),function(e){e[e.Vast10=1]="Vast10",e[e.Vast20=2]="Vast20",e[e.Vast30=3]="Vast30",e[e.Vast10Wrapper=4]="Vast10Wrapper",e[e.Vast20Wrapper=5]="Vast20Wrapper",e[e.Vast30Wrapper=6]="Vast30Wrapper",e[e.Vast40=7]="Vast40",e[e.Vast40Wrapper=8]="Vast40Wrapper",e[e.Daast10=9]="Daast10",e[e.Daast10Wrapper=10]="Daast10Wrapper"}(te||(te={})),function(e){e[e.Vpaid10=1]="Vpaid10",e[e.Vpaid20=2]="Vpaid20",e[e.Mraid1=3]="Mraid1",e[e.Ormma=4]="Ormma",e[e.Mraid2=5]="Mraid2",e[e.Mraid3=6]="Mraid3"}(ne||(ne={})),function(e){e[e.Streaming=1]="Streaming",e[e.Progressive=2]="Progressive",e[e.Download=3]="Download"}(ie||(ie={}));var ae=function(){var e=anaSessionStorage.getItem(d);return e||(e=F(),anaSessionStorage.setItem(d,e)),H()?"tr"+e:e},se=function(e,t,n){var i=P().consentManager;return{ad_unit:e,auction_timeout:n,inventory_type:"web",additional_targeting:t,property_id:R(),opportunity_data:{platform:"web"},site:{page:document.location.href,referer:document.referrer},matched_ids:{ids:re()},consent:{tcfV2:i.tcfV2String,usPrivacyString:i.usPrivacyString},session_id:ae()}},de=function(e,t,n,i,o,r,a,s,d){var c=se(e,t,d);return c.video_delivery=ie.Progressive,c.video_placement=n,c.video_playback_method=i,c.video_position=o,c.video_start_delay=r,c.video_width=a,c.video_height=s,c},ce={BannerBids:{get:function(e,t,n,i,o){I("".concat(ue(),"/wana/bids/request"),{uid:W(),ad_unit:e},se(e,t,n),(function(e){switch(e.status){case 200:var t=JSON.parse(e.responseText).bids||[];i({code:200,bids:t.map((function(e){return new G(e)}))});break;case f:var n=void 0;n=JSON.parse(e.responseText).message===m?m:e.status.toString(),i({code:f,bids:[],err_msg:n});break;default:console.error("HTTP error "+e.status),i({code:e.status,bids:[],err_msg:e.status.toString()})}}),o)},invalidate:function(e,t,n,i){M("invalidating bids for adUnitID ".concat(e,":"),t);var o=t.map((function(e){var t=e.toCustomJSON();return t.creative="",t.impression_pixels=[],t.view_pixels=[],t.click_pixels=[],t}));I("".concat(ue(),"/wana/bids/invalidate"),{uid:W(),ad_unit:e},{bids:o},n,i)}},VideoBids:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=de(e,t,n,o,i,r,a,s,d);I("".concat(ue(),"/wana/bids/request"),{uid:W(),ad_unit:e},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);M("".concat(e," got video bid response from ANA"),n);var i=n.bids||[];c({code:200,fallback_vast_url:n.fallback_vast_url,bids:i.map((function(e){return new G(e)}))});break;case f:var o=void 0;o=(n=JSON.parse(t.responseText)).message===m?m:t.status.toString(),c({code:f,bids:[],fallback_vast_url:null,err_msg:o});break;default:console.error("HTTP error "+t.status),c({code:t.status,bids:[],fallback_vast_url:null,err_msg:t.status.toString()})}}),l)},vicEvent:function(e,t,n){var i=function(e){return e.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join("")}(W()+":"+t);D("".concat(ue(),"/ana/vics/video"),{event:e,bk:i,bid_id:n},null,console.error)}},VMAP:{get:function(e,t,n,i,o,r,a,s,d,c,l){var u=de(e,t,n,o,i,r,a,s,d);I("".concat(ue(),"/vmap/request"),{uid:W()},u,(function(t){switch(t.status){case 200:var n=JSON.parse(t.responseText);M("".concat(e," got video bid response from ANA"),n),c({code:200,tag_url:n.tag_url});break;case f:var i=void 0;i=(n=JSON.parse(t.responseText)).message===m?m:t.status.toString(),c({code:f,tag_url:null,err_msg:i});break;default:console.error("HTTP error "+t.status),c({code:t.status,tag_url:null,err_msg:t.status.toString()})}}),l)}},UserSync:{getUrls:function(e,t){var n=R();I("".concat("https://ads.assemblyexchange.com","/doh/sync"),{uid:W(),property_id:n},{synced_ids:e},t)},doSync:function(e,t,n){D(t,null,n)}},Hertz:{impression:function(e,t){void 0===t&&(t="adserver"),M("reporting on bid ".concat(t," impression to hertz for ").concat(e));var n=R(),i=W(),o=ae();D("".concat(ue(),"/hertz/impression"),{uid:i,ad_unit_id:e,session_id:o,bid_id:t,property_id:n},null)}}},le=function(e,t){t&&(ce.BannerBids.invalidate(e,[t],null,console.error),t.renderImpressionPixels())},ue=function(){return window.ana_staging||-1!==window.location.href.indexOf(l)?r.replace("https://","https://staging."):r},pe=function(){return pe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pe.apply(this,arguments)},he={adUnitID:"",format:e.HORIZONTAL,elementID:"",collapseBeforeFill:!1,collapseIfNoFill:!1,dimensions:null,baseTargeting:{},passThroughANA:!1,apsEnabled:!0,adServerRender:!0},ge=function(){function e(e,t){this.options=pe(pe({},he),t),this.anaWeb=e,this.adUnitID=this.options.adUnitID,this.elementID=this.options.elementID,this.dimensions=this.options.dimensions,this.baseTargeting=this.options.baseTargeting,this.passThroughANA=this.options.passThroughANA,this.apsEnabled=e.apsEnabled&&this.options.apsEnabled,this.adServerRender=this.options.adServerRender,this.refreshCount=0}return e.prototype.updateBaseTargeting=function(e){this.baseTargeting=pe(pe({},this.baseTargeting),e)},e.prototype.fetchANABids=function(e,t){var n=this;if(!this.anaWeb.hasFocus()&&this.refreshCount>0)return M("prevent ad slot refresh - document not in focus"),t&&t();if(this.refreshCount++,this.passThroughANA)e&&e([]);else{var i=pe(pe({},this.anaWeb.globalTargeting),this.baseTargeting);ce.BannerBids.get(this.adUnitID,i,this.anaWeb.auctionTimeout,(function(i){var o=[];switch(i.code){case 200:(o=i.bids).length>0&&n.anaWeb.bidManager.addBids(o,n.adUnitID);break;case f:return i.err_msg===m&&console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")),void(t&&t(i.err_msg))}e&&e(o)}),(function(t){console.error(t),e&&e([])}))}},e.prototype.fetchAPSBids=function(e,t){throw Error("method `fetchAPSBids` is not implemented")},e.prototype.updateTargeting=function(){},e.prototype.getTopBid=function(){var e=this.anaWeb,t=this.adUnitID;return e.bidManager.getBid(t)},e.prototype.renderInElement=function(e,t){var n=this.adUnitID,i=this.anaWeb;!function(e,t){var n=document.getElementById(e);if(!n)throw Error("tried to render ad on missing element "+e);for(;n.firstChild;)n.removeChild(n.firstChild);"none"===n.style.display&&(n.style.display="inline-block");var i=document.createElement("iframe");i.setAttribute("srcdoc",t.Creative),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("TOPMARGIN","0"),i.setAttribute("LEFTMARGIN","0"),i.setAttribute("allowtransparency","true");var o=t.Width,r=t.Height;i.setAttribute("width","".concat(o)),i.setAttribute("height","".concat(r)),n.append(i)}(e,t),le(n,t),i.bidManager.useBid(n,t.BidID)},e.prototype.alreadyRendered=function(){throw Error("unimplemented method: alreadyRendered")},e}();ge.prototype.toString=function(){return"ANASlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var fe,me=(fe=function(e,t){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},fe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ye=function(){return ye=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ye.apply(this,arguments)},ve=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.fetched=function(){M("fetched ".concat(i))},i.rendered=function(){M("rendered ".concat(i))},i.format=i.options.format,i.collapseBeforeFill=i.options.collapseBeforeFill,i.collapseIfNoFill=i.options.collapseIfNoFill,i.slot=null,i.currentBid=null,i.slotType=x.GOOGLE,i.resetRequestMgr(),i.anaWeb.lazyLoad?(i.fetchBids(),C()&&(i.addSlotEventListener("slotRequested",i.fetched),i.addSlotEventListener("slotOnload",i.rendered)),i):(googletag.cmd.push((function(){i.registerSlot()})),i)}return me(t,e),t.prototype.resetRequestMgr=function(){this.requestMgr={didDirectRender:!1,anaRequestComplete:!1,apsRequestComplete:!1,gptRefreshComplete:!1},this.currentBid=null},t.prototype.fetchAPSBids=function(e){var t=this;this.anaWeb.apsEnabled&&window.apstag.fetchBids({slots:[{slotID:this.elementID,slotName:this.adUnitID,sizes:this.dimensions}]},(function(n){googletag.cmd.push((function(){t.updateApsTargeting(),t.apsRequestCompleted()})),e&&e(n)}))},t.prototype.anaRequestCompleted=function(){this.requestMgr.anaRequestComplete=!0},t.prototype.apsRequestCompleted=function(){this.requestMgr.apsRequestComplete=!0},t.prototype.alreadyRendered=function(){return!!this.requestMgr.didDirectRender&&(this.requestMgr.didDirectRender=!1,!0)},t.prototype.maybeRenderBid=function(e){return!(!e||this.adServerRender&&!e.DirectRender)&&(this.requestMgr.didDirectRender=!0,this.renderInElement(this.elementID,e),!0)},t.prototype.removeSlot=function(){var e=this;googletag.cmd.push((function(){var t=e.slot;googletag.destroySlots([t]),e.slot=null,document.getElementById(e.elementID).innerHTML=null}));var t=this.anaWeb,n=t.createdSlots.indexOf(this);-1!==n&&t.createdSlots.splice(n,1)},t.prototype.setAdServerRender=function(e){this.adServerRender=e},t.prototype.updateAnaTargeting=function(){var e=this,t=this.getTopBid(),n=this.slot,i=this.baseTargeting;if(t){if(this.currentBid=t,this.maybeRenderBid(t))return;null===n?(M("updateTargeting - register slot for ".concat(this)),this.registerSlot(t.Targeting)):Object.keys(ye(ye({},i),t.Targeting)).forEach((function(i){M("updateTargeting - set targeting ".concat(i,", ").concat(t.Targeting[i]," for ").concat(e)),n.setTargeting(i,t.Targeting[i])}))}else null===n&&(M("updateTargeting - register slot with no bid for ".concat(this)),this.registerSlot())},t.prototype.updateApsTargeting=function(){window.apstag.setDisplayBids()},t.prototype.bidRequestReturned=function(e){return void 0===e&&(e=!0),!!this.requestMgr.anaRequestComplete&&(this.apsEnabled?!!this.requestMgr.apsRequestComplete&&(e&&this.refreshGPTSlot(),!0):(e&&this.refreshGPTSlot(),!0))},t.prototype.refreshGPTSlot=function(){var e=this;this.requestMgr.didDirectRender?M("refreshGPTSlot, skipping since slot was rendered directly"):this.requestMgr.gptRefreshComplete?M("refreshGPTSlot, skipping since slot is already refreshed"):(this.requestMgr.gptRefreshComplete=!0,this.adServerRender&&googletag.cmd.push((function(){M("Calling GAM refresh for ",e),googletag.pubads().refresh([e.slot])})))},t.prototype.refresh=function(e){var t=this;this.slot&&googletag.cmd.push((function(){t.slot.clearTargeting()})),this.resetRequestMgr();this.fetchANABids((function(n){M("ANA responded with bids for ".concat(t),n),e&&e(n),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateAnaTargeting(),t.anaRequestCompleted(),t.bidRequestReturned()}))})),this.fetchAPSBids((function(e){M("APS responded with bids for ".concat(t),e),googletag.cmd.push((function(){t.requestMgr.gptRefreshComplete||t.updateApsTargeting(),t.apsRequestCompleted(),t.bidRequestReturned()}))})),setTimeout(this.refreshGPTSlot.bind(this),this.anaWeb.auctionTimeout+500)},t.prototype.registerSlot=function(e){var t=this;M("registerSlot - define slot for ".concat(this));var n=this,i=n.dimensions,o=n.format,r=n.collapseBeforeFill,a=n.collapseIfNoFill,s=n.adUnitID,d=n.elementID,c=n.baseTargeting,l=this.prepareDimensions(i,o);if(l&&l.length){this.slot=googletag.defineSlot(s,l,d);var u=this.slot;u.setCollapseEmptyDiv(r,a),console.warn("this.addSlotEventListener('impressionViewable'"),this.addSlotEventListener("impressionViewable",(function(e){t.currentBid?(M("Rendering ViewPixels for ".concat(t.adUnitID),e),t.currentBid.renderViewPixels()):M("Ignoring ViewPixels on AdUnit since it does not have a currentBid on ",t.adUnitID)})),u.setCollapseEmptyDiv(r,a),e&&Object.keys(ye(ye({},c),e)).forEach((function(n){M("registerSlot - set targeting ".concat(n,", ").concat(e[n]," for ").concat(t)),u.setTargeting(n,e[n])})),u.addService(googletag.pubads()),googletag.display(d)}else console.error("No dimensions found")},t.prototype.addSlotEventListener=function(e,t){var n=this.elementID;googletag.cmd.push((function(){googletag.pubads().addEventListener(e,(function(e){e.slot.getSlotElementId()===n&&t(e)}))}))},t.prototype.prepareDimensions=function(e,t){return e&&e.length?e:o[t]||[]},t.prototype.fetchBids=function(){var e=this;this.fetchANABids((function(t){M("fetchBids - ANA responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.updateAnaTargeting(),e.anaRequestCompleted()}))}),(function(t){throw Error("".concat(e.slot," error getting ANA bids: ").concat(t))})),this.apsEnabled&&this.fetchAPSBids((function(t){M("fetchBids - APS responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.apsRequestCompleted()}))}))},t}(ge);ve.prototype.toString=function(){return"BannerSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var be=function(){function e(e,t,n,i,o){this.playerType=e,this.adUnitID=i,this.targeting=o,this.adsManagerLoadedCustomCbk=t,this.videoPlayerID=n,this.html5Player=document.getElementById(n),this.initAds()}return e.prototype.initAds=function(){throw new Error("must be implemented by child class")},e.prototype.anaBidRequest=function(e,t){var n=this;e((function(e){if(e.includes("bids=&")&&!t)throw Error("did not receive ANA bid and ad server render disabled");n.imaInit(e)}),(function(e){throw Error("".concat(n.videoPlayerID," error getting ANA bids: ").concat(e))}))},e.prototype.imaInit=function(e){throw new Error("must be implemented by child class")},e.prototype.vastUrlAndVideoSrc=function(e){M("".concat(this.videoPlayerID," imaInit"));var t,n=(t=window.ana_vast)||(-1!==window.location.href.indexOf("ana_vast=")&&(t=E(window.location.href).searchParams.get(c))?t:"");if(n||(n=e),n){var i=this.html5Player.currentSrc;if(!i&&""!==i)throw Error("".concat(this.videoPlayerID," does not have a valid src"));return M("".concat(this.videoPlayerID," vast used: ").concat(n,", src: ").concat(i)),{videoVastUrl:n,videoSrc:i}}M("".concat(this.videoPlayerID," we don't have an ad to show"))},e.prototype.adsManagerLoadedCallback=function(e){throw new Error("must be implemented by child class")},e.prototype.addDefaultListeners=function(){var e=this,t=window.google;this.adsManagerLoadedCustomCbk&&this.adsManagerLoadedCustomCbk(this.html5Player,this.playerType,this.adsManager);var n=[t.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t.ima.AdEvent.Type.CLICK,t.ima.AdEvent.Type.VIDEO_CLICKED,t.ima.AdEvent.Type.VIDEO_ICON_CLICKED,t.ima.AdEvent.Type.STARTED,t.ima.AdEvent.Type.AD_PROGRESS,t.ima.AdEvent.Type.AD_BUFFERING,t.ima.AdEvent.Type.IMPRESSION,t.ima.AdEvent.Type.PAUSED,t.ima.AdEvent.Type.RESUMED,t.ima.AdEvent.Type.FIRST_QUARTILE,t.ima.AdEvent.Type.MIDPOINT,t.ima.AdEvent.Type.THIRD_QUARTILE,t.ima.AdEvent.Type.COMPLETE,t.ima.AdEvent.Type.DURATION_CHANGE,t.ima.AdEvent.Type.USER_CLOSE,t.ima.AdEvent.Type.LOADED,t.ima.AdEvent.Type.ALL_ADS_COMPLETED,t.ima.AdEvent.Type.SKIPPED,t.ima.AdEvent.Type.LINEAR_CHANGED,t.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,t.ima.AdEvent.Type.AD_METADATA,t.ima.AdEvent.Type.AD_BREAK_READY,t.ima.AdEvent.Type.LOG,t.ima.AdEvent.Type.VOLUME_CHANGED,t.ima.AdEvent.Type.VOLUME_MUTED,t.ima.AdEvent.Type.INTERACTION],i=function(){var t;t=e.adUnitID,ce.Hertz.impression(t)};this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,i),this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,(function(){return e.adsManager.removeEventListener(t.ima.AdEvent.Type.IMPRESSION,i)}));for(var o=0;o<n.length;o++)this.adsManager.addEventListener(n[o],this.onAdEvent.bind(this)),M("".concat(this.videoPlayerID," bind ").concat(n[o]," ad event"))},e.prototype.onAdEvent=function(e){void 0===e&&(e={});var t=window.google,n=e.type;n!==t.ima.AdEvent.Type.AD_PROGRESS&&M("".concat(this.videoPlayerID," ad event: ").concat(n))},e}(),we=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ae=function(e){function t(t,n,i,o){var r=e.call(this,j.VIDEO_JS,t,n,i,o)||this;return r.toggleOverlayedBtnContainer=function(){r.overlayedBtnContainer&&(r.overlayedBtnContainer.hidden=!r.overlayedBtnContainer.hidden)},r.onComplete=function(){r.adPlaying=!1},r.onStarted=function(){r.adPlaying=!0},r.onSkipped=function(){r.adPlaying=!1,r.adDisplayContainer.destroy(),r.html5Player.play()},r.onContentPauseRequested=function(){r.adPlaying=!0,r.html5Player.pause()},r.onContentResumeRequested=function(){r.adPlaying=!1,r.html5Player.play()},r.onAdLoaded=function(e){e.getAd().isLinear()||r.html5Player.play()},M("initializing IMAManagerHTML5 for",n),r.adPlaying=!1,r}return we(t,e),t.prototype.initAds=function(){var e=this,t=window.google;if(!this.html5Player)throw Error("video element was not found on the page using id=".concat(this.videoPlayerID));this.overlayedBtnContainer=document.createElement("div"),this.overlayedBtnContainer.classList.add("ana-ad-overlay"),this.overlayedBtnContainer.id=this.videoPlayerID+"_ana_ad_overlay";var n=document.createElement("div");n.classList.add("ana-ad-container"),n.id=this.videoPlayerID+"_ana_ad_container",this.html5Player.after(this.overlayedBtnContainer,n),this.adDisplayContainer=new t.ima.AdDisplayContainer(n,this.html5Player),this.adsLoader=new t.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(t.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedCallback.bind(this),!1),this.adsLoader.addEventListener(t.ima.AdErrorEvent.Type.AD_ERROR,console.error,!1),this.html5Player.onended=this.adsLoader.contentComplete,window.addEventListener("resize",(function(){if(e.adsManager){var n=e.html5Player.clientWidth,i=e.html5Player.clientHeight;e.adsManager.resize(n,i,t.ima.ViewMode.NORMAL)}}))},t.prototype.imaInit=function(e){if(e&&""!==e){var t=window.google,n=this.vastUrlAndVideoSrc(e).videoVastUrl;this.adsManager&&this.adsManager.destroy(),this.adsLoader.contentComplete();var i=new t.ima.AdsRequest;i.adTagUrl=n,i.linearAdSlotWidth=640,i.linearAdSlotHeight=480,i.nonLinearAdSlotWidth=640,i.nonLinearAdSlotHeight=150,i.forceNonLinearFullSlot=!0,i.omidAccessModeRules={},i.omidAccessModeRules[t.ima.OmidVerificationVendor.OTHER]=t.ima.OmidAccessMode.FULL,this.adsLoader.requestAds(i),this.overlayedBtnContainer.addEventListener("click",this.onOverlayedBtnContainerClick.bind(this)),this.overlayedBtnContainer.addEventListener("touchend",this.onOverlayedBtnContainerClick.bind(this))}},t.prototype.onOverlayedBtnContainerClick=function(e){e.preventDefault(),this.adPlaying?this.adsManager.resume():this.playAds(),this.toggleOverlayedBtnContainer()},t.prototype.playAds=function(){var e=window.google;this.adDisplayContainer&&this.adDisplayContainer.initialize(),this.html5Player.load();try{var t=this.html5Player.getBoundingClientRect(),n=t.width,i=t.height;this.adsManager.init(n,i,e.ima.ViewMode.NORMAL),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(e.ima.AdEvent.Type.STARTED,this.onStarted),this.adsManager.addEventListener(e.ima.AdEvent.Type.SKIPPED,this.onSkipped),this.adsManager.addEventListener(e.ima.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.addEventListener(e.ima.AdEvent.Type.PAUSED,this.toggleOverlayedBtnContainer),this.adsManager.start()}catch(e){this.html5Player.play()}},t.prototype.adsManagerLoadedCallback=function(e){M("".concat(this.videoPlayerID," AdsManager loaded"));var t=window.google,n=new t.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[t.ima.UiElements.AD_ATTRIBUTION,t.ima.UiElements.COUNTDOWN],this.adsManager=e.getAdsManager(this.html5Player,n),this.addDefaultListeners()},t}(be),Ee=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Se=function(e){function t(t,n,i,o){var r=e.call(this,j.VIDEO_JS,t,n,i,o)||this;return M("initializing IMAManagerVideoJS for",n),navigator.userAgent.match(/iPad|Android/i)&&r.html5Player.hasAttribute("controls")&&r.html5Player.removeAttribute("controls"),r.overlayedBtnContainer=document.getElementById(n),r}return Ee(t,e),t.prototype.initAds=function(){var e,t=window.videojs,n=window.google;if(this.html5Player=document.getElementById(this.videoPlayerID+"_html5_api"),!this.html5Player)throw Error("video element was not found on the page using id=".concat(this.videoPlayerID));this.videoJSPlayer=t(this.videoPlayerID);var i={id:this.videoPlayerID,adLabel:"Advertisement",disableAdControls:!1,showControlsForJSAds:!0,adsManagerLoadedCallback:this.adsManagerLoadedCallback.bind(this),omidVendorAccess:(e={},e[n.ima.OmidVerificationVendor.OTHER]=n.ima.OmidAccessMode.FULL,e)};this.videoJSPlayer.ima(i)},t.prototype.imaInit=function(e){if(e&&""!==e){var t=this.vastUrlAndVideoSrc(e),n=t.videoVastUrl,i=t.videoSrc;this.videoJSPlayer.ima.setContentWithAdTag(i,n,!1),this.videoJSPlayer.ima.requestAds(),this.boundBidRequestClick=this.onOverlayedBtnContainerClick.bind(this),this.boundBidRequestTouch=this.onOverlayedBtnContainerClick.bind(this),this.overlayedBtnContainer.addEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.addEventListener("touchend",this.boundBidRequestTouch)}},t.prototype.onOverlayedBtnContainerClick=function(e){e.preventDefault(),this.videoJSPlayer.ima.initializeAdDisplayContainer(),this.overlayedBtnContainer.removeEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.removeEventListener("touchend",this.boundBidRequestTouch)},t.prototype.adsManagerLoadedCallback=function(){M("".concat(this.videoPlayerID," AdsManager loaded")),this.adsManager=this.videoJSPlayer.ima.getAdsManager(),this.addDefaultListeners()},t}(be),Te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ie.apply(this,arguments)},De=function(e){function t(t,n,i){var o,r=e.call(this,t,i)||this;if(r.playerType=n,void 0===i.startDelay)throw Error("startDelay must be specified for video ad slots");if(i.startDelay<-2)throw Error("startDelay must be valid");if(void 0===i.adPlacement)throw Error("adPlacement must be specified for video ad slots");if(void 0===i.adPosition)throw Error("adPosition must be specified for video ad slots");if(i.adPosition<1||i.adPosition>7)throw Error("adPosition must be valid not Unknown");if(!i.playbackMethod||i.playbackMethod<1||i.playbackMethod>6)throw Error("playbackMethod must be specified for video ad slots");if(r.startDelay=i.startDelay,r.adPlacement=i.adPlacement,r.adPosition=i.adPosition,r.playbackMethod=i.playbackMethod,r.wrapperDiv=document.getElementById(r.elementID),r.dimensions&&0===r.dimensions.length)throw new Error("".concat(r.elementID," dimensions must be either omitted or have at least one element in the array"));switch(r.playerType){case j.VIDEO_JS:o=Se;break;case j.HTML5:o=Ae;break;default:throw Error("unsupported video player type: ".concat(n))}return r.videoManager=new o(i.adsManagerLoadedCbk,r.elementID,r.adUnitID,r.baseTargeting),r.videoManager.anaBidRequest(r.fetchANAVMAP.bind(r),r.adServerRender),r}return Te(t,e),t.prototype.fetchANAVMAP=function(e,t){var n=this,i=this.currentDimensions(),o=Ie(Ie({},this.anaWeb.globalTargeting),this.baseTargeting);ce.VMAP.get(this.adUnitID,o,this.adPlacement,this.adPosition,this.playbackMethod,this.startDelay,i[0][0],i[0][1],this.anaWeb.auctionTimeout,(function(i){var o="";switch(i.code){case 200:o=i.tag_url;break;case f:return void(i.err_msg===m?console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")):t&&t(i.err_msg))}n.adServerRender||(o+="&ad_server_render=0"),e&&e(o)}),(function(e){console.error(e),t(e.status.toString())}))},t.prototype.fetchAPSBids=function(e,t){},t.prototype.currentDimensions=function(){var e;if(this.dimensions)e=this.dimensions;else{var t=this.playerDimensions();e=[[t.w,t.h]]}if(0===e.length||2!==e[0].length)throw new Error("".concat(this.elementID," final dimensions are not valid: ").concat(e));return e},t.prototype.playerDimensions=function(){var e=this.wrapperDiv.getBoundingClientRect(),t=e.width,n=e.height;if(0===t||0===n)throw Error("".concat(this.elementID," wrong video ad slot dimensions: ").concat(t,"x").concat(n));return{w:t,h:n}},t}(ge);De.prototype.toString=function(){return"VideoSlot('".concat(this.adUnitID,"', ").concat(this.playerType,", '").concat(this.elementID,"')")};var Oe,Pe=function(){function e(e){if(this.anaWeb=e,window.addEventListener)window.addEventListener("message",this.handleMessage.bind(this),!1);else{if(!window.attachEvent)throw Error("No event listener found!");window.attachEvent("onmessage",this.handleMessage.bind(this))}}return e.prototype.handleMessage=function(e){if(e&&(r=e.origin,h.some((function(e){return e.test(r)})))&&e.data&&e.data.bidID){var t=e.data,n=t.adUnitID,i=t.bidID,o=this.anaWeb.bidManager.getBidToRender(n,i);o&&(e.source?e.source.postMessage(JSON.stringify(o),e.origin):console.error("e.source is not available in this context"),le(n,o))}var r;e&&function(e){return g.some((function(t){return t.test(e)}))}(e.origin)&&e.data&&e.data.msgType&&"cookieSyncingSuccess"===e.data.msgType&&(M("synced cookie message event for ".concat(e.data.bidderId,", id=").concat(e.data.partnerUid)),z(e.data.bidderId,e.data.partnerUid))},e}(),Re=function(){return Re=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Re.apply(this,arguments)},_e={enableSingleRequest:!1,globalTargeting:{},sandboxIframe:!1,collapseEmptyDivs:!1,enableLazyLoad:!1,lazyLoadOptConfig:{fetchMarginPercent:800,renderMarginPercent:400,mobileScaling:3}},Ce=function(e,t){if(void 0===t&&(t=null),window.googletag)throw new Error("attempting to initialize ANA sdk with pre-initialized gpt integration. aborting");var n;!function(){document.body||console.error("loadGPTTagJS called before there is a body to append to");var e=document.createElement("script");e.async=!0,e.defer=!0,e.src=u,document.body.appendChild(e),M("added GPT script on the page ".concat(u))}();var i=(n=e?Re(Re({},_e),e):_e).enableSingleRequest,o=n.globalTargeting,r=n.sandboxIframe,a=n.collapseEmptyDivs,s=n.enableLazyLoad,d=n.lazyLoadOptConfig;window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((function(){i&&googletag.pubads().enableSingleRequest(),r&&googletag.pubads().setSafeFrameConfig({sandbox:!0}),a&&googletag.pubads().collapseEmptyDivs(),o&&Object.keys(o).length&&Object.keys(o).forEach((function(e){googletag.pubads().setTargeting(e,o[e])})),s?(console.log("lazy load enabled",d),googletag.pubads().enableLazyLoad(d)):googletag.pubads().disableInitialLoad(),googletag.enableServices(),window.addEventListener("blur",(function(){"IFRAME"===document.activeElement.nodeName?(Be(t),Le(t)):Me=null})),window.addEventListener("focus",(function(){Me=null}))}))},Me=null,Be=function(e){var t=document.activeElement;if(t&&"IFRAME"===t.tagName&&Me!==t&&(Me=t,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var n=document.activeElement.parentNode,i=null,o="";n.parentNode&&"DIV"===n.parentNode.nodeName&&n.parentNode.getAttribute("id")?(i=n.parentNode,o=i.getAttribute("id")):(i=n,o=n.getAttribute("id")),googletag.pubads().getSlots().forEach((function(t){if(o===t.getSlotElementId()&&e){var n=e.getBannerSlot(o);n&&n.currentBid?(M("Rendering ClickPixels if available for adUnit ",o),n.currentBid.renderClickPixels()):M("Ignoring click pixel on add since it does not have a currentBid on ",o)}}))}},Le=function(e){setInterval((function(){Be(e)}),25)};!function(e){e.GOOGLE="googletag"}(Oe||(Oe={}));var ke,Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ne.apply(this,arguments)},Ue={pubID:null,adServer:Oe.GOOGLE},Ve=function(e){if(window.apstag)throw new Error("attempting to initialize ANA sdk with pre-initialized apt integration");!function(){function e(e,t){window.apstag._Q.push([e,t])}document.body||console.error("loadAPSTagJS called before there is a body to append to"),window.apstag={init:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("i",t)},fetchBids:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e("f",t)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var t=document.createElement("script");t.async=!0,t.src=p;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),M("added APS script on the page ".concat(p))}();var t=Ne(Ne({},Ue),e),n=t.pubID,i=t.adServer;if(!n)throw new Error("to fully enable amazon publisher tag integration you need to pass at least `pubID`");window.apstag.init({pubID:n,adServer:i})},xe=new(function(){function e(){this._usPrivacyData=null,this._tcData=null}return Object.defineProperty(e.prototype,"tcData",{get:function(){return this._tcData},set:function(e){this._tcData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tcfV2String",{get:function(){return this._tcData?this._tcData.tcString:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyData",{get:function(){return this._usPrivacyData},set:function(e){this._usPrivacyData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usPrivacyString",{get:function(){return this._usPrivacyData?this._usPrivacyData.uspString:null},enumerable:!1,configurable:!0}),e}()),je=function(){function e(e,t,n){void 0===e&&(e=0),this.count=e,this.timeoutInt=n,this.doneCallback=t}return e.prototype.add=function(e){void 0===e&&(e=1),this.count+=e},e.prototype.decrement=function(e){void 0===e&&(e=1),this.count=this.count-e,0===this.count&&(this.timeoutInt&&clearTimeout(this.timeoutInt),this.doneCallback())},e}(),qe=function(){function e(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}}return e.prototype.addBids=function(e,t){var n=this,i=this,o=i.usedBidIDs,r=i.bidsByID,a=i.bidsByAdUnit,s=(0,i.adUnitKey)(t);e.forEach((function(e){var t=e.BidID;e.ClientReceived=(new Date).getTime(),n.getBidByID(t)||o[t]||(r[t]=e,a[s]?a[s].push(e):a[s]=[e])})),a[s].sort((function(e,t){return e.Value-t.Value}))},e.prototype.getBid=function(e){var t=this.bidsByAdUnit,n=(0,this.adUnitKey)(e);if(t[n]&&t[n].length){t[n]=t[n].filter((function(e){return!e.isExpired()}));var i=t[n];return i[i.length-1]}return null},e.prototype.getBidByID=function(e){return this.bidsByID[e]||null},e.prototype.getBidToRender=function(e,t){return this.usedBidIDs[t]?null:(this.useBid(e,t),this.getBidByID(t))},e.prototype.useBid=function(e,t){var n=this,i=n.usedBidIDs,o=n.bidsByAdUnit,r=(0,n.adUnitKey)(e);if(!i[t]&&void 0!==o&&void 0!==o[r]){var a=o[r].map((function(e){return e.BidID})).indexOf(t);-1!==a&&o[r].splice(a,1),i[t]=!0}},e.prototype.reset=function(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}},e.prototype.adUnitKey=function(e){var t=window.location.href;return"".concat(e,":").concat(t)},e}(),Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ge.apply(this,arguments)},Fe={slotEventsHandlers:{},gptOptions:{globalTargeting:{}},apsOptions:null,syncCookies:!0,resyncCookiesAfterTimeout:5e3,propertyId:window.location.hostname,videoOptions:null,lightMode:!1,auctionTimeout:b},He=function(){function e(t){void 0===t&&(t={}),this.createdSlots=[],this.createdGoogleSlots=[],this.createdVideoContainers=[];var n,i=Ge(Ge({},Fe),t),o=i.slotEventsHandlers,r=i.gptOptions,a=i.apsOptions,s=i.syncCookies,d=i.resyncCookiesAfterTimeout,c=i.propertyId,l=i.lightMode,u=i.auctionTimeout;L("auctionTimeout")&&parseInt(L("auctionTimeout"))>0&&(n=parseInt(L("auctionTimeout"))),this.bidManager=new qe,this.consentManager=xe,this.slotEventsHandlers=o,this.msgHandler=new Pe(this),this.syncCookies=s,this.resyncCookiesAfterTimeout=d,this.propertyId=c,this.apsEnabled=!!a,this.refreshedAllSlots=!1,this.globalTargeting=r.globalTargeting,this.lazyLoad=r.enableLazyLoad,this.lightMode=!!l,this.auctionTimeout=n||u,window.ANAWebSDKInstance=this,this.setFocusListeners(),t.auctionTimeout||n?(t.auctionTimeout||n)&&M("Setting auctionTimeout to ".concat(this.auctionTimeout)):M("auctionTimeout wasn't provided, using default value: ".concat(b)),(this.auctionTimeout<500||this.auctionTimeout>4e3)&&(this.auctionTimeout=b,console.error("auctionTimeout is out of range (".concat(500," - ").concat(4e3,"), using default value: ").concat(b))),"__tcfapi"in window&&(M("GDPR - consent management framework was found on the page"),window.__tcfapi("getTCData",2,(function(e,t){t?(M("getTCData cbk success",e),xe.tcData=e):M("getTCData cbk fail",e)}))),"__uspapi"in window&&(M("CCPA - consent management framework was found on the page"),window.__uspapi("getUSPData",1,(function(e,t){t?(M("getUSPData cbk success",e),xe.usPrivacyData=e):M("getUSPData cbk fail",e)}))),void 0===this.globalTargeting.SDK&&e.version&&(this.globalTargeting.SDK=e.version),void 0===this.globalTargeting.domain&&"localhost"!==window.location.hostname&&(this.globalTargeting.domain=window.location.hostname),void 0===this.globalTargeting.auctionTimeout&&this.auctionTimeout&&(this.globalTargeting.auctionTimeout=this.auctionTimeout.toString()),this.uid=W(),this.sessionId=ae(),this.syncCookies&&(this.syncUserCookies(),this.resyncCookiesAfterTimeout&&setTimeout(this.syncUserCookies.bind(this),this.resyncCookiesAfterTimeout)),this.lightMode||(a&&Ve(a),Ce(r,this))}return e.prototype.setFocusListeners=function(){var e=this;this.internalHasFocus=document.hasFocus(),N("focus",window,(function(){e.internalHasFocus=!0})),N("blur",window,(function(){e.internalHasFocus=!1})),N("scroll",window,(function(){e.internalHasFocus=!0})),N("visibilitychange",window,(function(){e.internalHasFocus="visible"===document.visibilityState})),N("touchstart",window,(function(){e.internalHasFocus=!0}))},e.prototype.createSlot=function(e,t){var n=null;switch(e){case x.GOOGLE:this.lightMode&&M("making google banner slots in light mode seems sketchy"),n=new ve(this,t),this.createdGoogleSlots.push(n);break;case x.ANA:this.lightMode||M("making a lightmode slot without the SDK in lightmode seems sketchy"),n=new ge(this,t);break;default:throw Error("Specified slot type is not supported: ".concat(e))}return this.createdSlots.push(n),n},e.prototype.createVideoSlot=function(e,t){var n=new De(this,e,t);return this.createdVideoContainers.push(n),n},e.prototype.refreshAllGoogleSlots=function(){var e=this;if(this.lazyLoad)throw new Error("ANA Web SDK does not support refreshAllGoogleSlots when lazy loading is enabled");var t=this.waitGroup;this.refreshedAllSlots=!1;var n=this.createdGoogleSlots;if(null==t){var i=setTimeout(this.onBidsFetchTimeout.bind(this),3e3),o=n.filter((function(e){return e.apsEnabled})).length,r=n.length+o;t=new je(r,this.onBidsFetchSuccess.bind(this),i),this.waitGroup=t,n.forEach((function(e){e.slot&&googletag.cmd.push((function(){e.slot.clearTargeting()})),e.resetRequestMgr()})),n.forEach((function(n){n&&(n.fetchANABids((function(i){M("refreshAllSlots - ANA responded with bids for ".concat(n),i),googletag.cmd.push((function(){M("ANA BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateAnaTargeting(),n.anaRequestCompleted(),t.decrement()}))}),(function(){e.waitGroup=null})),n.apsEnabled&&n.fetchAPSBids((function(i){M("refreshAllSlots - APS responded with bids for ".concat(n),i),googletag.cmd.push((function(){M("APS BIDS - auction is already completed?",e.refreshedAllSlots),e.refreshedAllSlots||n.updateApsTargeting(),n.apsRequestCompleted(),t.decrement()}))})))})),setTimeout(this.onBidsFetchSuccess.bind(this),this.auctionTimeout+500)}else console.warn("calling refreshAllSlots too fast")},e.prototype.hasFocus=function(){return document.hasFocus()||this.internalHasFocus},e.prototype.refreshSubscribedBannerSlots=function(e,t){if(!this.hasFocus())return M("skipping auto refresh, document not in focus, trying later with slots:",e),void setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),300);M("auto refreshing slots:",e),e.forEach((function(e){return e.refresh()})),setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},e.prototype.autoRefreshSlots=function(e,t,n){void 0===t&&(t=3e4),void 0===n&&(n=!1),M("subscribed slots for auto refresh:",e,"in",t,"ms, firstInstantRefresh=",n),n?this.refreshSubscribedBannerSlots(e,t):setTimeout(this.refreshSubscribedBannerSlots.bind(this,e,t),t)},Object.defineProperty(e,"version",{get:function(){return"2.2.3"},enumerable:!1,configurable:!0}),e.prototype.onBidsFetchTimeout=function(){M("[WARNING!!!]onBidsFetchTimeout, we got timeout before all bidders where completed"),this.onBidsFetchSuccess()},e.prototype.onBidsFetchSuccess=function(){var e=this;if(M("onBidsFetchSuccess, this.refreshedAllSlots=",this.refreshedAllSlots),this.refreshedAllSlots)M("onBidsFetchSuccess, skipping since all slots were already refreshed");else{this.refreshedAllSlots=!0;var t=[];this.createdGoogleSlots.forEach((function(e){e.adServerRender&&!e.alreadyRendered()&&t.push(e.slot)})),0!==t.length?googletag.cmd.push((function(){e.waitGroup=null,M("Calling GAM refresh for all the slots"),googletag.pubads().refresh(t)})):this.waitGroup=null}},e.prototype.updateGlobalTargeting=function(e){var t;this.globalTargeting=Ge(Ge({},this.globalTargeting),e),(t=this.globalTargeting)&&Object.keys(t).length&&googletag.cmd.push((function(){Object.keys(t).forEach((function(e){googletag.pubads().setTargeting(e,t[e])}))}))},e.prototype.syncUserCookies=function(){if(!this.propertyId)throw Error("propertyId is needed to initialize SDK");var e=R();J(e,this.uid,re())},e.prototype.getBannerSlot=function(e){var t=null;return this.createdSlots.forEach((function(n){n.elementID===e&&(t=n)})),t},e}();function We(){M("ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ ANA Web SDK ".concat("2.2.3"," ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚")),M("dispatching anaReadyEvent"),document.dispatchEvent(new CustomEvent("ANAReady"))}return function(e){e.VideoMp4="video/mp4",e.VideoOgg="video/ogg"}(ke||(ke={})),"loading"!==document.readyState?setTimeout(We,0):document.addEventListener("DOMContentLoaded",We),window.ANAWeb=He,window.SlotTypeEnum=x,He.SlotTypeEnum=x,Object.defineProperty(He,"uid",{get:function(){return W()}}),Object.defineProperty(He,"sessionId",{get:function(){return ae()}}),He.AdPosition=ee,He.ContentDeliveryMethod=ie,He.PlaybackCessationMode=Y,He.PlaybackMethod=$,He.StartDelay=Q,He.VideoApiFramework=ne,He.VideoLinearity=X,He.VideoPlacementType=Z,He.VideoPlayerType=j,He.VideoProtocol=te,He.Mime=ke,i})()}));
// MediaLab Inc.